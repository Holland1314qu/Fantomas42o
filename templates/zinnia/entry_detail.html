{% extends "zinnia/base.html" %}

{% load tagging_tags comments %}

{% block title %}{{ object.title }}{% endblock %}

{% block content %}
<div class="entryPost">
  <h2 class="entryTitle">
    <a href="{{ object.get_absolute_url }}" title="{{ object.title }}">{{ object.title }}</a>
  </h2>
  <p class="entryMeta">
    Post&eacute; par {% for author in object.authors.all %}<a href="{% url zinnia_author_detail author %}" title="Tous les articles de {{ author }}"><strong>{{ author }}</strong></a>, {% endfor %}
	le {{ object.creation_date|date:"d F Y"|capfirst }}
        sous {% for category in object.categories.all %}
    <a href="{{ category.get_absolute_url }}" title="{{ category }}">{{ category }}</a>
  {% endfor %}</p>
  <div class="entryContent">
    {{ object.get_content|safe }}
  </div>
  <span class="entryTags"><em>:</em>
  {% tags_for_object object as tag_list %}
  {% if tag_list|length %}
  {% for tag in tag_list %}  
    <a href="{% url zinnia_tagged_entry_list tag %}" title="Tag {{ tag }}">{{ tag }}</a>
  {% endfor%}
  {% else %}
    <span>Pas de tags</span>
  {% endif %}
  </span>
</div>

{% get_comment_count for object as comment_count %}
<a name="comments"></a>
{% if comment_count %}
<div id="numberofcomments">
 <span>{{ comment_count }} Commentaire{{ comment_count|pluralize }}</span>
</div>
{% else %}
 {% if object.comment_enabled %}
<div id="numberofcomments">
  <span>Pas encore de commentaires...</span>
</div>
 {% endif %}
{% endif %}

<div id="comment">
  {% if comment_count %}
  {% get_comment_list for object as comment_list %}
  <ol id="commentlist">
  {% for comment in comment_list %}
    <li class="alt {% cycle box1,box2 %}">
      <div class="commentbody">
        <a name="comment_{{ comment.pk }}"></a>
        <cite>{{ comment.user_name }}</cite><br />
        {% if comment.url %}<small><a href="{{ comment.url }}" target="blank">{{ comment.url }}</a></small><br />{% endif %}
        <small class="commentmetadata"><a>{{ comment.submit_date|date:"l d F Y \a H:i" }}</a></small>
        {{ comment.comment|safe|linebreaks }}
      </div>
      <div class="cleared"></div>
    </li>
  {% endfor %}
  </ol>
  {% else %}
  {% if object.comment_enabled %}
  <p>Soyez le premier, ou pas.</p>
  {% endif %}
  {% endif %}
  {% if object.comment_enabled %}
  <h3>Poster un commentaire</h3>
  <div>
    {% render_comment_form for object %}
  </div>
  {% else %}
    <h3>Les commentaires sont ferm&eacute;s</h3>
  {% endif %}
</div>
{% endblock %}